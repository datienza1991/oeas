"use strict";(self.webpackChunkoeas=self.webpackChunkoeas||[]).push([[598],{1598:($,f,r)=>{r.r(f),r.d(f,{SettingModule:()=>Y});var d=r(9808),p=r(1402),v=r(1100),u=r(2382),c=r(760),b=r(1135),A=r(4004),U=r(8372),y=r(1884),e=r(5e3),m=r(7957),h=r(1945),C=r(2683),g=r(1047),S=r(647),z=r(1758),l=r(939),O=r(6042),x=r(6695),_=r(9119);function L(n,i){1&n&&e._UZ(0,"i",9)}function M(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit;return e.oxw().onResetPassword(a)}),e._UZ(1,"i",15),e.qZA()}}function w(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"status"),e.qZA(),e.TgZ(10,"td"),e.TgZ(11,"a",10),e._UZ(12,"i",11),e.qZA(),e.TgZ(13,"button",12),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().delete(o)}),e._UZ(14,"i",11),e.qZA(),e.YNc(15,M,2,0,"button",13),e.qZA(),e.qZA()}if(2&n){const t=i.$implicit;e.xp6(2),e.AsE("",null==t?null:t.firstName," ",null==t?null:t.lastName,""),e.xp6(2),e.Oqu(null==t?null:t.departmentName),e.xp6(2),e.Oqu(null==t?null:t.userType),e.xp6(2),e.Oqu(e.lcZ(9,13,(null==t?null:t.isActive)||!1)),e.xp6(3),e.MGl("routerLink","",null==t?null:t.id,"/edit"),e.xp6(1),e.Q6J("nzType","edit")("nzTheme","twotone")("nzTwotoneColor","#faad14"),e.xp6(2),e.Q6J("nzType","delete")("nzTheme","twotone")("nzTwotoneColor","#f5222d"),e.xp6(1),e.Q6J("ngIf",t.isResetPassword)}}let F=(()=>{class n{constructor(t){this.modal=t,this.deleteRecord=new e.vpe,this.search=new e.vpe,this.resetPassword=new e.vpe,this.searchText=""}delete(t){this.modal.confirm({nzIconType:"question-circle",nzTitle:"Delete Record",nzContent:`Are you sure you want to delete user with name <b>${t.firstName} ${t.lastName}</b>?`,nzOnOk:()=>{this.deleteRecord.emit(t)}})}onResetPassword(t){this.modal.confirm({nzTitle:"Reset Password",nzContent:`Are you sure you want to reset password of user with name <b>${t.firstName} ${t.lastName}</b>?`,nzOnOk:()=>{this.resetPassword.emit({userId:t.user_id,userDetailId:t.id})}})}onSearchChange(t){this.search.emit(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.Sf))},n.\u0275cmp=e.Xpm({type:n,selectors:[["batstateu-user-list"]],inputs:{userList:"userList"},outputs:{deleteRecord:"deleteRecord",search:"search",resetPassword:"resetPassword"},decls:28,vars:4,consts:[[1,"user-list-container"],["nzTitle","Users",1,"site-page-header"],[2,"width","240px",3,"nzSuffix"],["type","text","nz-input","","placeholder","Search","id","search-box",3,"ngModel","ngModelChange"],["suffixIconSearch",""],["nz-page-header-breadcrumb",""],["nzBordered","",3,"nzData"],["basicTable",""],[4,"ngFor","ngForOf"],["nz-icon","","nzType","search"],["nz-button","","nzType","text","nz-tooltip","","nzTooltipTitle","Edit",3,"routerLink"],["nz-icon","",3,"nzType","nzTheme","nzTwotoneColor"],["nz-button","","nzType","text","nz-tooltip","","nzTooltipTitle","Delete",3,"click"],["nz-button","","nzType","text","nz-tooltip","","nzTooltipTitle","Reset Password",3,"click",4,"ngIf"],["nz-button","","nzType","text","nz-tooltip","","nzTooltipTitle","Reset Password",3,"click"],["nz-icon","","nzType","key","nzTheme","outline",2,"color","#1890ff"]],template:function(t,s){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"nz-page-header",1),e.TgZ(2,"nz-page-header-extra"),e.TgZ(3,"nz-input-group",2),e.TgZ(4,"input",3),e.NdJ("ngModelChange",function(o){return s.searchText=o})("ngModelChange",function(o){return s.onSearchChange(o)}),e.qZA(),e.qZA(),e.YNc(5,L,1,0,"ng-template",null,4,e.W1O),e.qZA(),e.TgZ(7,"nz-breadcrumb",5),e.TgZ(8,"nz-breadcrumb-item"),e._uU(9,"Setting"),e.qZA(),e.TgZ(10,"nz-breadcrumb-item"),e._uU(11,"Users"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"nz-table",6,7),e.TgZ(14,"thead"),e.TgZ(15,"tr"),e.TgZ(16,"th"),e._uU(17,"Name"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Department"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Type"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"Status"),e.qZA(),e.TgZ(24,"th"),e._uU(25,"Actions"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"tbody"),e.YNc(27,w,16,15,"tr",8),e.qZA(),e.qZA(),e.qZA()),2&t){const a=e.MAs(6),o=e.MAs(13);e.xp6(3),e.Q6J("nzSuffix",a),e.xp6(1),e.Q6J("ngModel",s.searchText),e.xp6(8),e.Q6J("nzData",s.userList),e.xp6(15),e.Q6J("ngForOf",o.data)}},directives:[h.$O,h.Jp,C.w,g.gB,g.ke,g.Zp,u.Fj,u.JJ,u.On,S.Ls,z.Dg,h.A2,z.MO,l.N8,l.Om,l.$Z,l.Uo,l._C,l.p0,d.sg,O.ix,p.yS,x.SY,d.O5],pipes:[_.s],styles:[".user-list-container[_ngcontent-%COMP%]{margin:16px}nz-table[_ngcontent-%COMP%]{padding:16px 0}nz-page-header[_ngcontent-%COMP%]{background-color:#fafafa}"]}),n})(),P=(()=>{class n{constructor(t,s){this.userService=t,this.modal=s,this.searchSubject$=new b.X("")}onResetPassword({userId:t,userDetailId:s}){this.userService.resetPassword(t).subscribe(()=>{this.userService.updateResetPasswordDefaultStatus(s).subscribe(()=>{this.getAll(""),this.modal.info({nzTitle:"Reset Password",nzContent:"Password has been reset to default"})})})}onDelete(t){this.userService.deleteUser(t.user_id).subscribe(()=>{this.getAll("")})}ngOnInit(){this.getAll(""),this.searchSubject$.asObservable().pipe((0,A.U)(t=>t.trim()),(0,U.b)(1e3),(0,y.x)()).subscribe(t=>this.getAll(t))}getAll(t){this.userService.getAll(t).subscribe(s=>{this.userList=s})}onSearch(t){this.searchSubject$.next(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c.KD),e.Y36(m.Sf))},n.\u0275cmp=e.Xpm({type:n,selectors:[["batstateu-users"]],decls:1,vars:1,consts:[[3,"userList","deleteRecord","search","resetPassword"]],template:function(t,s){1&t&&(e.TgZ(0,"batstateu-user-list",0),e.NdJ("deleteRecord",function(o){return s.onDelete(o)})("search",function(o){return s.onSearch(o)})("resetPassword",function(o){return s.onResetPassword(o)}),e.qZA()),2&t&&e.Q6J("userList",s.userList)},directives:[F],styles:[""]}),n})();var T=r(2201),N=r(9650),R=r(5620),J=r(8133);let D=(()=>{class n{constructor(t,s,a,o,Z,I){this.store=t,this.userService=s,this.modal=a,this.route=o,this.departmentService=Z,this.sectionService=I,this.isActiveEnable=!1,this.userFormType=T.O.FACULTY_ADMIN,this.isSetting=!0,this.user$=this.store.select(N.PR)}ngOnInit(){console.log("user form init.."),this.getValues(),this.getDepartments(),this.getSections(),this.getUserTypes()}onSave(t){const s=Object.assign(Object.assign({},t),null!=this.id||this.id>0?{id:this.id,user_id:this.userId,user_type_id:t.userTypeId}:{user_id:this.userId,isActive:!1,user_type_id:t.userTypeId});this.userService.save(s).subscribe(()=>this.modal.success({nzTitle:"Success",nzContent:"Record has been saved",nzOkText:"Ok"}))}getValues(){const t=Number(this.route.snapshot.paramMap.get("id"));this.userService.getUserDetail(t).subscribe(s=>{this.id=s.id,this.code=s.code,this.userDetail=s,this.userFormType="Faculty"===s.userType||"Admin"===s.userType?T.O.FACULTY_ADMIN:T.O.STUDENT,this.isActiveEnable=!0})}getDepartments(){this.departmentService.getAll().subscribe(t=>{this.departments=t})}getSections(){this.sectionService.getAll().subscribe(t=>{this.sections=t})}getUserTypes(){this.userService.getAllUserTypes().subscribe(t=>{this.userTypes=t})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(R.yh),e.Y36(c.KD),e.Y36(m.Sf),e.Y36(p.gz),e.Y36(c.n7),e.Y36(c.l))},n.\u0275cmp=e.Xpm({type:n,selectors:[["batstateu-user-form"]],decls:1,vars:8,consts:[[3,"userDetail","departments","sections","isActiveEnable","userFormType","userTypes","code","isSetting","save"]],template:function(t,s){1&t&&(e.TgZ(0,"batstateu-user-form-view",0),e.NdJ("save",function(o){return s.onSave(o)}),e.qZA()),2&t&&e.Q6J("userDetail",s.userDetail)("departments",s.departments)("sections",s.sections)("isActiveEnable",s.isActiveEnable)("userFormType",s.userFormType)("userTypes",s.userTypes)("code",s.code)("isSetting",s.isSetting)},directives:[J.q],styles:[""]}),n})(),Y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,u.UX,u.u5,v.b,c.m8,p.Bz.forChild([{path:"",pathMatch:"full",redirectTo:"users"},{path:"users",component:P},{path:"users/:id/edit",component:D}])]]}),n})()}}]);